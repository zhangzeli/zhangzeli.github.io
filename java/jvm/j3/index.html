<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>æœ‰åŠ©äºæé«˜â€œé”â€æ€§èƒ½çš„å‡ ç‚¹å»ºè®® | æ³½æ³½Plus+æ¬ç –å¸ˆå‚…</title><meta name="description" content="Javaè™šæ‹Ÿæœºè°ƒä¼˜ JVMä¼˜åŒ–,é”ä¼˜åŒ–"><meta name="keywords" content="Javaè™šæ‹Ÿæœºè°ƒä¼˜ JVMä¼˜åŒ–,é”ä¼˜åŒ–"><meta name="author" content="æ³½æ³½853089986@qq.com"><meta name="copyright" content="æ³½æ³½853089986@qq.com"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="http://img.zeze.info/img/avatar/haizeiwang.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="dns-prefetch" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="crossorigin"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://hm.baidu.com"><link rel="dns-prefetch" href="https://hm.baidu.com"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"><link rel="dns-prefetch" href="https://fonts.googleapis.com"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="dns-prefetch" href="//busuanzi.ibruce.info"><meta name="google-site-verification" content="mBkx3v13jY7xHaep_e72zBXO_qIjx0MTHNxDrYlz-PI"><meta name="baidu-site-verification" content="agXWMOrk01"><meta name="360-site-verification" content="6baddbc95d86be25e83904dcdeef9a99"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="æœ‰åŠ©äºæé«˜â€œé”â€æ€§èƒ½çš„å‡ ç‚¹å»ºè®®"><meta name="twitter:description" content="Javaè™šæ‹Ÿæœºè°ƒä¼˜ JVMä¼˜åŒ–,é”ä¼˜åŒ–"><meta name="twitter:image" content="http://img.zeze.info/img/java/jvm/20191224174733.png!www.zeze.info"><meta property="og:type" content="article"><meta property="og:title" content="æœ‰åŠ©äºæé«˜â€œé”â€æ€§èƒ½çš„å‡ ç‚¹å»ºè®®"><meta property="og:url" content="http://www.zeze.info/java/jvm/j3/"><meta property="og:site_name" content="æ³½æ³½Plus+æ¬ç –å¸ˆå‚…"><meta property="og:description" content="Javaè™šæ‹Ÿæœºè°ƒä¼˜ JVMä¼˜åŒ–,é”ä¼˜åŒ–"><meta property="og:image" content="http://img.zeze.info/img/java/jvm/20191224174733.png!www.zeze.info"><meta property="article:published_time" content="2019-12-24T17:01:15.000Z"><meta property="article:modified_time" content="2021-08-10T01:23:42.998Z"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="canonical" href="http://www.zeze.info/java/jvm/j3/"><link rel="prev" title="éƒ½åœ¨è¿™é‡Œ!!Java(GC)åƒåœ¾æ”¶é›†å™¨å’Œæ”¶é›†ç®—æ³•" href="http://www.zeze.info/java/jvm/j4/"><link rel="next" title="ç»å¸¸è¢«é—®åˆ°Javaè™šæ‹Ÿæœºè°ƒä¼˜,çœ‹å®Œè¿™ç¯‡ä¸è¶³200å­—çš„æ–‡ç« èƒ½å¸®åˆ°ä½ " href="http://www.zeze.info/java/jvm/j2/"><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-5254611080539269',
  enable_page_level_ads: 'true'
});</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?afe63e75677b03375980b2bcf8239700";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'G-H84S8BZ8BP', 'auto');
ga('send', 'pageview');
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://www.zeze.info/","msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç®€"},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  bookmark: {
    message_prev: 'æŒ‰',
    message_next: 'é”®å°†æœ¬é¡µåŠ å…¥ä¹¦ç­¾'
  },
  runtime_unit: 'å¤©',
  runtime: true,
  copyright: {"languages":{"author":"ä½œè€…: æ³½æ³½853089986@qq.com","link":"é“¾æ¥: ","source":"æ¥æº: æ³½æ³½Plus+æ¬ç –å¸ˆå‚…","info":"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},
  ClickShowText: undefined,
  medium_zoom: true,
  fancybox: false,
  Snackbar: {"bookmark":{"message_prev":"æŒ‰","message_next":"é”®å°†æœ¬é¡µåŠ å…¥ä¹¦ç­¾"},"chs_to_cht":"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“","cht_to_chs":"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“","day_to_night":"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  baiduPush: true,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: true,
  isPhotoFigcaption: true,
  islazyload: true,
  isanchor: true
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zhangzeli/StaticFile@latest/hexo/butterfly/css/myself.css"><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="æ³½æ³½Plus+æ¬ç –å¸ˆå‚…" type="application/atom+xml">
</head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="http://img.zeze.info/img/avatar/haizeiwang.jpg" onerror="onerror=null;src='http://img.zeze.info/img/404/loading.gif!www.zeze.info'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length_num">47</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length_num">26</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length_num">19</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/me.html"><i class="fa-fw fa fa-heart"></i><span> å…³äº</span></a></div><div class="menus_item"><a class="site-page" href="/comment"><i class="fa-fw fa fa-comment"></i><span> ç•™è¨€</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> å…¶ä»–</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page" href="/404/"><i class="fa-fw fas fa-hands-helping"></i><span> å¸®åŠ©ä»–ä»¬</span></a></li></ul></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">ç›®å½•</div><div class="sidebar-toc__progress"><span class="progress-notice">ä½ å·²ç»è¯»äº†</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#æœ‰åŠ©äºæé«˜â€é”â€æ€§èƒ½çš„å‡ ç‚¹å»ºè®®"><span class="toc-number">1.</span> <span class="toc-text">æœ‰åŠ©äºæé«˜â€é”â€æ€§èƒ½çš„å‡ ç‚¹å»ºè®®</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#å‡å°é”æŒæœ‰çš„æ—¶é—´"><span class="toc-number">2.</span> <span class="toc-text">å‡å°é”æŒæœ‰çš„æ—¶é—´</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#å‡å°é”çš„åŠ›åº¦"><span class="toc-number">3.</span> <span class="toc-text">å‡å°é”çš„åŠ›åº¦</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#è¯»å†™åˆ†ç¦»æ¥æ›¿æ¢ç‹¬å é”"><span class="toc-number">4.</span> <span class="toc-text">è¯»å†™åˆ†ç¦»æ¥æ›¿æ¢ç‹¬å é”</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#é”åˆ†ç¦»"><span class="toc-number">5.</span> <span class="toc-text">é”åˆ†ç¦»</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#é”ç²—åŒ–"><span class="toc-number">6.</span> <span class="toc-text">é”ç²—åŒ–</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#javaè™šæ‹Ÿæœºå¯¹é”ä¼˜åŒ–æ‰€åšçš„åŠªåŠ›"><span class="toc-number">7.</span> <span class="toc-text">javaè™šæ‹Ÿæœºå¯¹é”ä¼˜åŒ–æ‰€åšçš„åŠªåŠ›</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#é”åå‘"><span class="toc-number">7.1.</span> <span class="toc-text">é”åå‘</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#è½»é‡çº§é”"><span class="toc-number">7.2.</span> <span class="toc-text">è½»é‡çº§é”</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#é”æ¶ˆé™¤"><span class="toc-number">7.3.</span> <span class="toc-text">é”æ¶ˆé™¤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#é”çš„ä¼˜ç¼ºç‚¹å¯¹æ¯”"><span class="toc-number">7.4.</span> <span class="toc-text">é”çš„ä¼˜ç¼ºç‚¹å¯¹æ¯”</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(http://img.zeze.info/img/java/jvm/20191224174733.png!www.zeze.info)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">æ³½æ³½Plus+æ¬ç –å¸ˆå‚…</a></span><span class="pull_right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/me.html"><i class="fa-fw fa fa-heart"></i><span> å…³äº</span></a></div><div class="menus_item"><a class="site-page" href="/comment"><i class="fa-fw fa fa-comment"></i><span> ç•™è¨€</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> å…¶ä»–</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page" href="/404/"><i class="fa-fw fas fa-hands-helping"></i><span> å¸®åŠ©ä»–ä»¬</span></a></li></ul></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">æœ‰åŠ©äºæé«˜â€œé”â€æ€§èƒ½çš„å‡ ç‚¹å»ºè®®</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="å‘è¡¨äº 2019-12-24 17:01:15"><i class="fa fa-calendar" aria-hidden="true"></i> å‘è¡¨äº 2019-12-24</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="æ›´æ–°äº 2021-08-10 01:23:42"><i class="fa fa-history" aria-hidden="true"></i> æ›´æ–°äº 2021-08-10</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/java/">java</a><i class="fa fa-angle-right post-meta__separator" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/java%E8%99%9A%E6%8B%9F%E6%9C%BA/">javaè™šæ‹Ÿæœº</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="post-meta__icon far fa-file-word" aria-hidden="true"></i><span>å­—æ•°æ€»è®¡:</span><span class="word-count">2.9k</span><span class="post-meta__separator">|</span><i class="post-meta__icon far fa-clock" aria-hidden="true"></i><span>é˜…è¯»æ—¶é•¿: 10 åˆ†é’Ÿ</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="post-meta__icon far fa-comments" aria-hidden="true"></i><span>è¯„è®ºæ•°:</span><a href="/java/jvm/j3/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/java/jvm/j3/" itemprop="commentCount"></span></a></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="æœ‰åŠ©äºæé«˜â€é”â€æ€§èƒ½çš„å‡ ç‚¹å»ºè®®"><a href="#æœ‰åŠ©äºæé«˜â€é”â€æ€§èƒ½çš„å‡ ç‚¹å»ºè®®" class="headerlink" title="æœ‰åŠ©äºæé«˜â€é”â€æ€§èƒ½çš„å‡ ç‚¹å»ºè®®"></a>æœ‰åŠ©äºæé«˜â€é”â€æ€§èƒ½çš„å‡ ç‚¹å»ºè®®</h1><blockquote>
<p>æœ€è¿‘é˜…è¯»ã€Šjavaé«˜å¹¶å‘ç¼–ç¨‹ä¸€ä¹¦ã€‹å¤§æ¦‚æ€»ç»“å‡ æ¡ï¼Œä¹Ÿæ˜¯ä¹¦ä¸­çš„å†…å®¹</p>
</blockquote>
<h1 id="å‡å°é”æŒæœ‰çš„æ—¶é—´"><a href="#å‡å°é”æŒæœ‰çš„æ—¶é—´" class="headerlink" title="å‡å°é”æŒæœ‰çš„æ—¶é—´"></a>å‡å°é”æŒæœ‰çš„æ—¶é—´</h1><blockquote>
<p>æ¯”å¦‚100ä¸ªäººå»é“¶è¡ŒåŠç†ä¸šåŠ¡ï¼Œè¦å¡«ä¸€ç™¾å¼ è¡¨ï¼Œä½†æ˜¯åªæœ‰ä¸€æ”¯ç¬”ï¼Œé‚£ä¹ˆå¾ˆæ˜¾ç„¶ï¼Œæ¯ä¸ªäººç”¨ç¬”çš„æ—¶é—´è¶ŠçŸ­ï¼Œæ•ˆç‡ä¹Ÿå°±æœˆé«˜ï¼šçœ‹ä»£ç ï¼š</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">othercode1å’Œothercode2å¾ˆè€—æ—¶é—´,é‡Œé¢æ²¡æœ‰æ¶‰åŠèµ„æºåŒæ­¥,åªæœ‰mutexMethodæ–¹æ³•è¦å¯¹èµ„æºåŒæ­¥,</span></span><br><span class="line"><span class="comment">æ‰€æœ‰ä¼˜åŒ–ä»£ç è®©æŒæœ‰é”æ—¶é—´å°½é‡çŸ­</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">syncMethod</span><span class="params">()</span></span>&#123;</span><br><span class="line">        othercode1();</span><br><span class="line">        mutexMethod();</span><br><span class="line">        othercode2();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">syncMethod</span><span class="params">()</span></span>&#123;</span><br><span class="line">        othercode1();</span><br><span class="line">        <span class="keyword">synchronized</span>(<span class="keyword">this</span>)&#123;</span><br><span class="line">            mutexMethod();</span><br><span class="line">        &#125;</span><br><span class="line">        othercode2();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åœ¨jdkæºç é‡Œé¢ä¹Ÿå¾ˆå®¹æ˜“æ‰¾åˆ°è¿™ç§æ‰‹æ®µ,æ¯”å¦‚å¤„ç†æ­£åˆ™è¡¨è¾¾å¼çš„Patternç±»</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Matcher <span class="title">matcher</span><span class="params">(CharSequence input)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!compiled) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span>(<span class="keyword">this</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!compiled)</span><br><span class="line">                    compile();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        Matcher m = <span class="keyword">new</span> Matcher(<span class="keyword">this</span>, input);</span><br><span class="line">        <span class="keyword">return</span> m;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åªæœ‰åœ¨è¡¨è¾¾å¼æœªç¼–è¯‘çš„æ—¶å€™è¿›è¡Œå±€éƒ¨åŠ é”,è¿™ç§æ–¹æ³•å¤§å¤§æé«˜äº†matcherçš„æ‰§è¡Œæ•ˆç‡å’Œå¯é æ€§</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„:<code>å‡å°‘é”çš„æŒæœ‰æ—¶é—´æœ‰åŠ©äºé™ä½é”å†²çªçš„å¯èƒ½æ€§,è¿›è€Œæå‡ç³»ç»Ÿçš„å¹¶å‘èƒ½åŠ›</code></p>
<h1 id="å‡å°é”çš„åŠ›åº¦"><a href="#å‡å°é”çš„åŠ›åº¦" class="headerlink" title="å‡å°é”çš„åŠ›åº¦"></a>å‡å°é”çš„åŠ›åº¦</h1><blockquote>
<p><code>concurrentHashMap</code>çš„å®ç°,ä»–çš„å†…éƒ¨è¢«åˆ†ä¸ºäº†è‹¥å¹²ä¸ªå°çš„<code>hashmap</code>,ç§°ä¹‹ä¸ºæ®µ(<code>SEGMENT</code>),é»˜è®¤æ˜¯16æ®µ</p>
</blockquote>
<blockquote>
<p>å‡å°é”ç²’åº¦ä¼šå¼•å…¥ä¸€ä¸ªæ–°çš„é—®é¢˜,å½“éœ€è¦è·å–å…¨å±€é”çš„æ—¶å€™,å…¶æ¶ˆè€—çš„èµ„æºä¼šè¾ƒå¤š,ä¸å¦‚<code>concurrenthashMap</code>çš„<code>size()</code>æ–¹æ³•.å¯ä»¥çœ‹åˆ°è®¡ç®—sizeçš„æ—¶å€™éœ€è¦è®¡ç®—å…¨éƒ¨æœ‰æ•ˆçš„æ®µçš„é”</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">long</span> n = sumCount();</span><br><span class="line">    <span class="keyword">return</span> ((n &lt; <span class="number">0L</span>) ? <span class="number">0</span> :</span><br><span class="line">            (n &gt; (<span class="keyword">long</span>)Integer.MAX_VALUE) ? Integer.MAX_VALUE :</span><br><span class="line">            (<span class="keyword">int</span>)n);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">final</span> <span class="keyword">long</span> <span class="title">sumCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    CounterCell[] as = counterCells; CounterCell a;</span><br><span class="line">    <span class="keyword">long</span> sum = baseCount;</span><br><span class="line">    <span class="keyword">if</span> (as != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; as.length; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((a = as[i]) != <span class="keyword">null</span>)</span><br><span class="line">                sum += a.value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>äº‹å®ä¸Šè®¡ç®—sizeçš„æ—¶å€™ä¼šå…ˆä½¿ç”¨æ— é”çš„æ–¹å¼è®¡ç®—,å¦‚æœå¤±è´¥ä¼šé‡‡ç”¨è¿™ä¸ªæ–¹æ³•,ä½†æ˜¯åœ¨é«˜å¹¶å‘çš„åœºåˆ<code>concurrenthashmap</code>çš„<code>size</code>ä¾ç„¶è¦å·®äºåŒæ­¥çš„<code>hashmap</code>.å› æ­¤åœ¨ç±»ä¼¼äº<code>size</code>è·å–å…¨å±€ä¿¡æ¯æ–¹æ³•è°ƒç”¨ä¸é¢‘ç¹çš„æƒ…å†µä¸‹,è¿™ç§å‡å°ç²’åº¦çš„çš„æ–¹æ³•æ‰æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„æé«˜ç³»ç»Ÿå¹¶å‘é‡</p>
</blockquote>
<p>æ³¨æ„:<code>æ‰€è°“å‡å°é”ç²’åº¦,å°±æ˜¯æŒ‡ç¼©å°é”å®šå¯¹è±¡çš„èŒƒå›´,ä»è€Œå‡å°é”å†²çªçš„å¯èƒ½æ€§,è¿›è€Œæé«˜ç³»ç»Ÿæ€§èƒ½</code></p>
<h1 id="è¯»å†™åˆ†ç¦»æ¥æ›¿æ¢ç‹¬å é”"><a href="#è¯»å†™åˆ†ç¦»æ¥æ›¿æ¢ç‹¬å é”" class="headerlink" title="è¯»å†™åˆ†ç¦»æ¥æ›¿æ¢ç‹¬å é”"></a>è¯»å†™åˆ†ç¦»æ¥æ›¿æ¢ç‹¬å é”</h1><blockquote>
<p>åœ¨è¯»å¤šå†™å°‘çš„æƒ…å†µä¸‹,ä½¿ç”¨è¯»å†™é”å¯ä»¥æœ‰æ•ˆçš„æé«˜ç³»ç»Ÿæ€§èƒ½<code>ReadWriteLock</code>å¯ä»¥æé«˜ç³»ç»Ÿæ€§èƒ½</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.high.concurrency;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Lock;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantReadWriteLock;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: www.zeze.info</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 8:43 2018/4/10</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReadWriteLockDemo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Lock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ReentrantReadWriteLock readWriteLock = <span class="keyword">new</span> ReentrantReadWriteLock();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Lock readLock =readWriteLock.readLock();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Lock writeLock = readWriteLock.writeLock();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> value;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">handleRead</span><span class="params">(Lock lock)</span> <span class="keyword">throws</span> InterruptedException</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            lock.lock();</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            <span class="keyword">return</span> value;</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleWrite</span><span class="params">(Lock lock,<span class="keyword">int</span> index)</span> <span class="keyword">throws</span> InterruptedException</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            lock.lock();</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            value =index;</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> ReadWriteLockDemo demo = <span class="keyword">new</span> ReadWriteLockDemo();</span><br><span class="line">        Runnable readRunnale = <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    demo.handleRead(lock);</span><br><span class="line">                    <span class="comment">//demo.handleRead(readLock);</span></span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Runnable write = <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">//demo.handleWrite(writeLock,new Random().nextInt());</span></span><br><span class="line">                    demo.handleWrite(lock,<span class="keyword">new</span> Random().nextInt());</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">18</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">new</span> Thread(readRunnale).start();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">18</span>;i&lt;<span class="number">20</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">new</span> Thread(write).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="é”åˆ†ç¦»"><a href="#é”åˆ†ç¦»" class="headerlink" title="é”åˆ†ç¦»"></a>é”åˆ†ç¦»</h1><blockquote>
<p>ä»¥<code>LinkedBlockingQueue</code>ä¸ºä¾‹,<code>take</code>å‡½æ•°å’Œ<code>put</code>å‡½æ•°åˆ†åˆ«å®ç°äº†ä»é˜Ÿåˆ—å–å’Œå¾€é˜Ÿåˆ—åŠ æ•°æ®ï¼Œè™½ç„¶ä¸¤ä¸ªæ–¹æ³•éƒ½å¯¹é˜Ÿåˆ—è¿›é¡¹äº†ä¿®æ”¹ï¼Œä½†æ˜¯<code>LinkedBlockingQueue</code>æ˜¯åŸºäºé“¾è¡¨çš„æ‰€ä»¥ä¸€ä¸ªæ“ä½œçš„æ˜¯å¤´ï¼Œä¸€ä¸ªæ˜¯é˜Ÿåˆ—å°¾ç«¯ï¼Œä»ç†è®ºæƒ…å†µä¸‹å°†å¹¶ä¸å†²çª</p>
</blockquote>
<blockquote>
<p>å¦‚æœä½¿ç”¨ç‹¬å é”åˆ™<code>take</code>å’Œ<code>put</code>å°±ä¸èƒ½å®ŒæˆçœŸæ­£çš„å¹¶å‘ï¼Œæ‰€ä»¥jdkå¹¶æ²¡æœ‰æ‰ç”¨è¿™ç§æ–¹å¼å–è€Œä»£ä¹‹çš„æ˜¯ä¸¤æŠŠä¸åŒçš„é”åˆ†ç¦»äº†putå’Œtakeçš„æ“ä½œï¼Œä¸‹é¢çœ‹æºç </p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/** Lock held by take, poll, etc */</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">final</span> ReentrantLock takeLock = <span class="keyword">new</span> ReentrantLock();<span class="comment">//takeå‡½æ•°éœ€è¦æŒæœ‰takeLock</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">/** Wait queue for waiting takes */</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">final</span> Condition notEmpty = takeLock.newCondition();</span><br><span class="line"></span><br><span class="line">   <span class="comment">/** Lock held by put, offer, etc */</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">final</span> ReentrantLock putLock = <span class="keyword">new</span> ReentrantLock();<span class="comment">//putå‡½æ•°éœ€è¦æŒæœ‰putLock</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">/** Wait queue for waiting puts */</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">final</span> Condition notFull = putLock.newCondition();</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">take</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        E x;</span><br><span class="line">        <span class="keyword">int</span> c = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">final</span> AtomicInteger count = <span class="keyword">this</span>.count;</span><br><span class="line">        <span class="keyword">final</span> ReentrantLock takeLock = <span class="keyword">this</span>.takeLock;</span><br><span class="line">        takeLock.lockInterruptibly(); <span class="comment">//ä¸èƒ½æœ‰ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å–æ•°æ®</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (count.get() == <span class="number">0</span>) &#123; <span class="comment">//å¦‚æœå½“å‰æ²¡æœ‰å¯ç”¨æ•°æ®,ä¸€ç›´ç­‰å¾…</span></span><br><span class="line">                notEmpty.await();      <span class="comment">//ç­‰å¾…,putæ“ä½œçš„é€šçŸ¥</span></span><br><span class="line">            &#125;</span><br><span class="line">            x = dequeue();         <span class="comment">//å–å¾—ç¬¬ä¸€ä¸ªæ•°æ®</span></span><br><span class="line">            c = count.getAndDecrement();<span class="comment">//æ•°é‡å‡ä¸€,åŸå­æ“ä½œå› ä¸ºå›åˆputåŒæ—¶è®¿é—®count.æ³¨æ„å˜é‡cæ˜¯countå‡ä¸€</span></span><br><span class="line">            <span class="keyword">if</span> (c &gt; <span class="number">1</span>)</span><br><span class="line">                notEmpty.signal();  <span class="comment">//é€šçŸ¥å…¶ä»–takeæ“ä½œ</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            takeLock.unlock(); <span class="comment">//é‡Šæ”¾é”</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (c == capacity)</span><br><span class="line">            signalNotFull(); <span class="comment">//é€šçŸ¥put,å·²æœ‰ç©ºä½™ç©ºé—´</span></span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(E e)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (e == <span class="keyword">null</span>) <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</span><br><span class="line">        <span class="comment">// Note: convention in all put/take/etc is to preset local var</span></span><br><span class="line">        <span class="comment">// holding count negative to indicate failure unless set.</span></span><br><span class="line">        <span class="keyword">int</span> c = -<span class="number">1</span>;</span><br><span class="line">        Node&lt;E&gt; node = <span class="keyword">new</span> Node&lt;E&gt;(e);</span><br><span class="line">        <span class="keyword">final</span> ReentrantLock putLock = <span class="keyword">this</span>.putLock;</span><br><span class="line">        <span class="keyword">final</span> AtomicInteger count = <span class="keyword">this</span>.count;</span><br><span class="line">        putLock.lockInterruptibly();<span class="comment">//ä¸èƒ½æœ‰ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è¿›è¡Œput</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             * Note that count is used in wait guard even though it is</span></span><br><span class="line"><span class="comment">             * not protected by lock. This works because count can</span></span><br><span class="line"><span class="comment">             * only decrease at this point (all other puts are shut</span></span><br><span class="line"><span class="comment">             * out by lock), and we (or some other waiting put) are</span></span><br><span class="line"><span class="comment">             * signalled if it ever changes from capacity. Similarly</span></span><br><span class="line"><span class="comment">             * for all other uses of count in other wait guards.</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="keyword">while</span> (count.get() == capacity) &#123; <span class="comment">//å¦‚æœé˜Ÿåˆ—å·²æ»¡</span></span><br><span class="line">                notFull.await();   <span class="comment">//ç­‰å¾…</span></span><br><span class="line">            &#125;</span><br><span class="line">            enqueue(node);  <span class="comment">//æ’å…¥æ•°æ®</span></span><br><span class="line">            c = count.getAndIncrement(); <span class="comment">//æ›´æ–°æ€»æ•°,å˜é‡cæ˜¯countåŠ 1å‰çš„å€¼</span></span><br><span class="line">            <span class="keyword">if</span> (c + <span class="number">1</span> &lt; capacity)</span><br><span class="line">                notFull.signal();   <span class="comment">//æœ‰è¶³å¤Ÿçš„ç©ºé—´,é€šçŸ¥å…¶ä»–çº¿ç¨‹</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            putLock.unlock();  <span class="comment">//é‡Šæ”¾é”</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (c == <span class="number">0</span>)</span><br><span class="line">            signalNotEmpty();  <span class="comment">//æ’å…¥æˆåŠŸå,é€šçŸ¥takeæ“ä½œ</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h1 id="é”ç²—åŒ–"><a href="#é”ç²—åŒ–" class="headerlink" title="é”ç²—åŒ–"></a>é”ç²—åŒ–</h1><blockquote>
<p>è™šæ‹Ÿæœºåœ¨é‡åˆ°ä¸€è¿ä¸²åœ°å¯¹åŒä¸€é”ä¸æ–­è¿›è¡Œè¯·æ±‚å’Œé‡Šæ”¾çš„æ“ä½œæ—¶,ä¾¿ä¼šæŠŠæ‰€æœ‰çš„é”æ“ä½œæ•´åˆæˆå¯¹é”çš„ä¸€æ¬¡è¯·æ±‚,ä»è€Œå‡å°å¯¹é”çš„è¯·æ±‚åŒæ­¥æ¬¡æ•°,è¿™ä¸ªæ“ä½œå«é”ç²—è¯,æ¯”å¦‚</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">20</span>;i++)&#123;</span><br><span class="line">     <span class="keyword">synchronized</span> (lock)&#123;</span><br><span class="line">                </span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ä¼˜åŒ–å</span></span><br><span class="line"><span class="keyword">synchronized</span> (lock)&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">20</span>;i++)&#123;</span><br><span class="line">     </span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„:<code>æ€§èƒ½ä¼˜åŒ–å°±æ˜¯æ ¹æ®è¿è¡Œæ—¶çš„çœŸå®æƒ…å†µå¯¹å„ä¸ªèµ„æºç‚¹è¿›è¡Œæƒè¡¡æŠ˜ä¸­çš„è¿‡ç¨‹,é”ç²—è¯çš„æ€æƒ³å’Œå‡å°‘é”æŒæœ‰æ—¶é—´æ˜¯ç›¸åçš„,ä½†æ˜¯åœ¨ä¸åŒçš„åœºåˆ,ä»–ä»¬çš„æ•ˆæœå¹¶ä¸ç›¸åŒ,æ‰€ä»¥å¤§å®¶è¦æ ¹æ®å®é™…æƒ…å†µ,è¿›è¡Œæƒè¡¡</code></p>
<h1 id="javaè™šæ‹Ÿæœºå¯¹é”ä¼˜åŒ–æ‰€åšçš„åŠªåŠ›"><a href="#javaè™šæ‹Ÿæœºå¯¹é”ä¼˜åŒ–æ‰€åšçš„åŠªåŠ›" class="headerlink" title="javaè™šæ‹Ÿæœºå¯¹é”ä¼˜åŒ–æ‰€åšçš„åŠªåŠ›"></a>javaè™šæ‹Ÿæœºå¯¹é”ä¼˜åŒ–æ‰€åšçš„åŠªåŠ›</h1><h2 id="é”åå‘"><a href="#é”åå‘" class="headerlink" title="é”åå‘"></a>é”åå‘</h2><blockquote>
<p>åå‘é”ï¼Œç®€å•çš„è®²ï¼Œå°±æ˜¯åœ¨é”å¯¹è±¡çš„å¯¹è±¡å¤´ä¸­æœ‰ä¸ª<code>ThreaddId</code>å­—æ®µï¼Œè¿™ä¸ªå­—æ®µå¦‚æœæ˜¯ç©ºçš„ï¼Œç¬¬ä¸€æ¬¡è·å–é”çš„æ—¶å€™ï¼Œå°±å°†è‡ªèº«çš„<code>ThreadId</code>å†™å…¥åˆ°é”çš„<code>ThreadId</code>å­—æ®µå†…ï¼Œå°†é”å¤´å†…çš„æ˜¯å¦åå‘é”çš„çŠ¶æ€ä½ç½®1.è¿™æ ·ä¸‹æ¬¡è·å–é”çš„æ—¶å€™ï¼Œç›´æ¥æ£€æŸ¥<code>ThreadId</code>æ˜¯å¦å’Œè‡ªèº«çº¿ç¨‹<code>Id</code>ä¸€è‡´ï¼Œå¦‚æœä¸€è‡´ï¼Œåˆ™è®¤ä¸ºå½“å‰çº¿ç¨‹å·²ç»è·å–äº†é”ï¼Œå› æ­¤ä¸éœ€å†æ¬¡è·å–é”ï¼Œç•¥è¿‡äº†è½»é‡çº§é”å’Œé‡é‡çº§é”çš„åŠ é”é˜¶æ®µã€‚æé«˜äº†æ•ˆç‡ã€‚</p>
</blockquote>
<blockquote>
<p>ä½†æ˜¯åå‘é”ä¹Ÿæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å½“é”æœ‰ç«äº‰å…³ç³»çš„æ—¶å€™ï¼Œéœ€è¦è§£é™¤åå‘é”ï¼Œä½¿é”è¿›å…¥ç«äº‰çš„çŠ¶æ€</p>
</blockquote>
<blockquote>
<p>å‚æ•°<code>-XX:+UseBiasedLocking</code></p>
</blockquote>
<blockquote>
<p><code>Java</code>åå‘é”(<code>Biased Locking</code>)æ˜¯<code>Java6</code>å¼•å…¥çš„ä¸€é¡¹å¤šçº¿ç¨‹ä¼˜åŒ–ã€‚å®ƒé€šè¿‡æ¶ˆé™¤èµ„æºæ— ç«äº‰æƒ…å†µä¸‹çš„åŒæ­¥åŸè¯­ï¼Œè¿›ä¸€æ­¥æé«˜äº†ç¨‹åºçš„è¿è¡Œæ€§èƒ½ã€‚åå‘é”ï¼Œé¡¾åæ€ä¹‰ï¼Œå®ƒä¼šåå‘äºç¬¬ä¸€ä¸ªè®¿é—®é”çš„çº¿ç¨‹ï¼Œå¦‚æœåœ¨æ¥ä¸‹æ¥çš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œè¯¥é”æ²¡æœ‰è¢«å…¶ä»–çš„çº¿ç¨‹è®¿é—®ï¼Œåˆ™æŒæœ‰åå‘é”çš„çº¿ç¨‹å°†æ°¸è¿œä¸éœ€è¦è§¦å‘åŒæ­¥ã€‚å¦‚æœåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œé‡åˆ°äº†å…¶ä»–çº¿ç¨‹æŠ¢å é”ï¼Œåˆ™æŒæœ‰åå‘é”çš„çº¿ç¨‹ä¼šè¢«æŒ‚èµ·ï¼ŒJVMä¼šå°è¯•æ¶ˆé™¤å®ƒèº«ä¸Šçš„åå‘é”ï¼Œå°†é”æ¢å¤åˆ°æ ‡å‡†çš„è½»é‡çº§é”ã€‚(åå‘é”åªèƒ½åœ¨å•çº¿ç¨‹ä¸‹èµ·ä½œç”¨)å› æ­¤ æµç¨‹æ˜¯è¿™æ ·çš„ <code>åå‘é”</code>-&gt;<code>è½»é‡çº§é”</code>-&gt;<code>é‡é‡çº§é”</code></p>
</blockquote>
<h2 id="è½»é‡çº§é”"><a href="#è½»é‡çº§é”" class="headerlink" title="è½»é‡çº§é”"></a>è½»é‡çº§é”</h2><blockquote>
<p>è½»é‡çº§é”åŠ é”ï¼šçº¿ç¨‹åœ¨æ‰§è¡ŒåŒæ­¥å—ä¹‹å‰ï¼Œ<code>JVM</code>ä¼šå…ˆåœ¨å½“å‰çº¿ç¨‹çš„æ ˆæ¡¢ä¸­åˆ›å»ºç”¨äºå­˜å‚¨é”è®°å½•çš„ç©ºé—´ï¼Œå¹¶å°†å¯¹è±¡å¤´ä¸­çš„<code>Mark Word</code>å¤åˆ¶åˆ°é”è®°å½•ä¸­ï¼Œå®˜æ–¹ç§°ä¸º<code>Displaced Mark Word</code>ã€‚</p>
</blockquote>
<blockquote>
<p>ç„¶åçº¿ç¨‹å°è¯•ä½¿ç”¨<code>CAS</code>å°†å¯¹è±¡å¤´ä¸­çš„<code>Mark Word</code>æ›¿æ¢ä¸ºæŒ‡å‘é”è®°å½•çš„æŒ‡é’ˆã€‚å¦‚æœæˆåŠŸï¼Œå½“å‰çº¿ç¨‹è·å¾—é”ï¼Œå¦‚æœå¤±è´¥ï¼Œè¡¨ç¤ºå…¶ä»–çº¿ç¨‹ç«äº‰é”ï¼Œå½“å‰çº¿ç¨‹ä¾¿å°è¯•ä½¿ç”¨è‡ªæ—‹æ¥è·å–é”ã€‚</p>
</blockquote>
<blockquote>
<p>è½»é‡çº§é”è§£é”ï¼šè½»é‡çº§è§£é”æ—¶ï¼Œä¼šä½¿ç”¨åŸå­çš„<code>CAS</code>æ“ä½œæ¥å°†<code>Displaced Mark Word</code>æ›¿æ¢å›åˆ°å¯¹è±¡å¤´ï¼Œå¦‚æœæˆåŠŸï¼Œåˆ™è¡¨ç¤ºæ²¡æœ‰ç«äº‰å‘ç”Ÿã€‚</p>
</blockquote>
<blockquote>
<p>å¦‚æœå¤±è´¥ï¼Œè¡¨ç¤ºå½“å‰é”å­˜åœ¨ç«äº‰ï¼Œé”å°±ä¼šè†¨èƒ€æˆé‡é‡çº§é”ã€‚</p>
</blockquote>
<p>æ³¨ï¼š<code>è½»é‡çº§é”ä¼šä¸€ç›´ä¿æŒï¼Œå”¤é†’æ€»æ˜¯å‘ç”Ÿåœ¨è½»é‡çº§é”è§£é”çš„æ—¶å€™ï¼Œå› ä¸ºåŠ é”çš„æ—¶å€™å·²ç»æˆåŠŸCASæ“ä½œï¼›è€ŒCASå¤±è´¥çš„çº¿ç¨‹ï¼Œä¼šç«‹å³é”è†¨èƒ€ï¼Œå¹¶é˜»å¡ç­‰å¾…å”¤é†’ã€‚</code>ï¼ˆè¯¦è§ä¸‹å›¾ï¼‰</p>
<p>ä¸‹å›¾æ˜¯ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶äº‰å¤ºé”ï¼Œå¯¼è‡´é”è†¨èƒ€çš„æµç¨‹å›¾ã€‚<br><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="http://img.zeze.info/img/java/jvm/2a.png!www.zeze.info" alt="è½»é‡çº§é”ä¼š"><br>é”ä¸ä¼šé™çº§</p>
<blockquote>
<p>è‡ªæ—‹å…¶å®å°±æ˜¯è™šæ‹Ÿæœºä¸ºäº†é¿å…çº¿ç¨‹çœŸå®çš„åœ¨æ“ä½œç³»ç»Ÿå±‚æŒ‚èµ·,è™šæ‹Ÿæœºè®©å½“å‰çº¿ç¨‹åšç©ºè½®è¯¢æˆ–è®¸æ˜¯å‡ ä¸ªcpuæ—¶é—´å‘¨æœŸ,å¦‚æœè¿˜æ²¡åŠæ³•è·å–é”åˆ™åœ¨æŒ‚èµ·.</p>
</blockquote>
<blockquote>
<p>å› ä¸ºè‡ªæ—‹ä¼šæ¶ˆè€—CPUï¼Œä¸ºäº†é¿å…æ— ç”¨çš„è‡ªæ—‹ï¼ˆæ¯”å¦‚è·å¾—é”çš„çº¿ç¨‹è¢«é˜»å¡ä½äº†ï¼‰ï¼Œä¸€æ—¦é”å‡çº§æˆé‡é‡çº§é”ï¼Œå°±ä¸ä¼šå†æ¢å¤åˆ°è½»é‡çº§é”çŠ¶æ€ã€‚</p>
</blockquote>
<blockquote>
<p>å½“é”å¤„äºè¿™ä¸ªçŠ¶æ€ä¸‹ï¼Œå…¶ä»–çº¿ç¨‹è¯•å›¾è·å–é”æ—¶ï¼Œéƒ½ä¼šè¢«é˜»å¡ä½ï¼Œå½“æŒæœ‰é”çš„çº¿ç¨‹é‡Šæ”¾é”ä¹‹åä¼šå”¤é†’è¿™äº›çº¿ç¨‹ï¼Œè¢«å”¤é†’çš„çº¿ç¨‹å°±ä¼šè¿›è¡Œæ–°ä¸€è½®çš„å¤ºé”ä¹‹äº‰ã€‚</p>
</blockquote>
<h2 id="é”æ¶ˆé™¤"><a href="#é”æ¶ˆé™¤" class="headerlink" title="é”æ¶ˆé™¤"></a>é”æ¶ˆé™¤</h2><blockquote>
<p>é”æ¶ˆé™¤æ˜¯Javaè™šæ‹Ÿæœºåœ¨JITç¼–è¯‘æ˜¯ï¼Œé€šè¿‡å¯¹è¿è¡Œä¸Šä¸‹æ–‡çš„æ‰«æï¼Œå»é™¤ä¸å¯èƒ½å­˜åœ¨å…±äº«èµ„æºç«äº‰çš„é”ï¼Œé€šè¿‡é”æ¶ˆé™¤ï¼Œå¯ä»¥èŠ‚çœæ¯«æ— æ„ä¹‰çš„è¯·æ±‚é”æ—¶é—´</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestLockEliminate</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getString</span><span class="params">(String s1, String s2)</span> </span>&#123;</span><br><span class="line">        StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        sb.append(s1);</span><br><span class="line">        sb.append(s2);</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> tsStart = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000000</span>; i++) &#123;</span><br><span class="line">            getString(<span class="string">"TestLockEliminate "</span>, <span class="string">"Suffix"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"ä¸€å…±è€—è´¹ï¼š"</span> + (System.currentTimeMillis() - tsStart) + <span class="string">" ms"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>getString()</code>æ–¹æ³•ä¸­çš„<code>StringBuffer</code>æ•°ä»¥å‡½æ•°å†…éƒ¨çš„å±€éƒ¨å˜é‡ï¼Œè¿›ä½œç”¨äºæ–¹æ³•å†…éƒ¨ï¼Œä¸å¯èƒ½é€ƒé€¸å‡ºè¯¥æ–¹æ³•ï¼Œå› æ­¤ä»–å°±ä¸å¯èƒ½è¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ï¼Œä¹Ÿå°±æ²¡æœ‰èµ„æºçš„ç«äº‰ï¼Œä½†æ˜¯<code>StringBuffer</code>çš„<code>append</code>æ“ä½œå´éœ€è¦æ‰§è¡ŒåŒæ­¥æ“ä½œ:</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> StringBuffer <span class="title">append</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        toStringCache = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">super</span>.append(str);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>é€ƒé€¸åˆ†æå’Œé”æ¶ˆé™¤åˆ†åˆ«å¯ä»¥ä½¿ç”¨å‚æ•°<code>-XX:+DoEscapeAnalysis</code>å’Œ<code>-XX:+EliminateLocks</code>(é”æ¶ˆé™¤å¿…é¡»åœ¨-serveræ¨¡å¼ä¸‹)å¼€å¯ã€‚ä½¿ç”¨å¦‚ä¸‹å‚æ•°è¿è¡Œä¸Šé¢çš„ç¨‹åºï¼š</p>
</blockquote>
<p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="http://img.zeze.info/img/java/jvm/10095500_qzEz.jpg!www.zeze.info" alt></p>
<p>ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿è¡Œç¨‹åºï¼š<code>-XX:+DoEscapeAnalysis -XX:+EliminateLocks</code></p>
<p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="http://img.zeze.info/img/java/jvm/10095500_eji9.jpg!www.zeze.info" alt></p>
<h2 id="é”çš„ä¼˜ç¼ºç‚¹å¯¹æ¯”"><a href="#é”çš„ä¼˜ç¼ºç‚¹å¯¹æ¯”" class="headerlink" title="é”çš„ä¼˜ç¼ºç‚¹å¯¹æ¯”"></a>é”çš„ä¼˜ç¼ºç‚¹å¯¹æ¯”</h2><table>
<thead>
<tr>
<th align="center">é”</th>
<th align="left">ä¼˜ç‚¹</th>
<th align="left">ç¼ºç‚¹</th>
<th align="left">é€‚ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody><tr>
<td align="center">åå‘é”</td>
<td align="left">åŠ é”å’Œè§£é”ä¸éœ€è¦é¢å¤–çš„æ¶ˆè€—ï¼Œå’Œæ‰§è¡ŒéåŒæ­¥æ–¹æ³•æ¯”ä»…å­˜åœ¨çº³ç§’çº§çš„å·®è·ã€‚</td>
<td align="left">å¦‚æœçº¿ç¨‹é—´å­˜åœ¨é”ç«äº‰ï¼Œä¼šå¸¦æ¥é¢å¤–çš„é”æ’¤é”€çš„æ¶ˆè€—ã€‚</td>
<td align="left">é€‚ç”¨äºåªæœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®åŒæ­¥å—åœºæ™¯ã€‚</td>
</tr>
<tr>
<td align="center">è½»é‡çº§é”</td>
<td align="left">ç«äº‰çš„çº¿ç¨‹ä¸ä¼šé˜»å¡ï¼Œæé«˜äº†ç¨‹åºçš„å“åº”é€Ÿåº¦ã€‚å¦‚æœå§‹ç»ˆå¾—ä¸åˆ°é”ç«äº‰çš„çº¿ç¨‹ä½¿ç”¨è‡ªæ—‹ä¼šæ¶ˆè€—CPUã€‚</td>
<td align="left">è¿½æ±‚å“åº”æ—¶é—´ã€‚<br>åŒæ­¥å—æ‰§è¡Œé€Ÿåº¦éå¸¸å¿«ã€‚</td>
<td align="left"></td>
</tr>
<tr>
<td align="center">é‡é‡çº§é”</td>
<td align="left">çº¿ç¨‹ç«äº‰ä¸ä½¿ç”¨è‡ªæ—‹ï¼Œä¸ä¼šæ¶ˆè€—CPUã€‚</td>
<td align="left">çº¿ç¨‹é˜»å¡ï¼Œå“åº”æ—¶é—´ç¼“æ…¢ã€‚</td>
<td align="left">è¿½æ±‚ååé‡ã€‚<br>åŒæ­¥å—æ‰§è¡Œé€Ÿåº¦è¾ƒé•¿ã€‚</td>
</tr>
</tbody></table>
<p>ğŸ‘ ğŸ‘ ğŸ‘</p>
<p>ğŸ‘<strong><a href="http://www.zeze.info">åšä¸»ä¸»é¡µ</a></strong>ğŸ‘</p>
<p><strong>å¯ä»¥åŠ åšä¸»å¾®ä¿¡ä¸€èµ·äº¤æµï¼š<img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="http://img.zeze.info/img/about/wx.jpg!www.zeze.info" alt="twobixiaoxin"></strong></p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="mailto:undefined" rel="external nofollow noopener noreferrer" target="_blank">æ³½æ³½853089986@qq.com</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="http://www.zeze.info/java/jvm/j3/">http://www.zeze.info/java/jvm/j3/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="external nofollow noopener noreferrer">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="http://www.zeze.info" target="_blank">æ³½æ³½Plus+æ¬ç –å¸ˆå‚…</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="http://www.zeze.info/images/Benz.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> æ‰“èµ<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="http://img.zeze.info/img/pay/wechatpay.png!www.zeze.info" alt="å¾®ä¿¡"><div class="post-qr-code__desc">å¾®ä¿¡</div></li><li class="reward-item"><img class="post-qr-code__img" src="http://img.zeze.info/img/pay/alipay.jpg!www.zeze.info" alt="æ”¯ä»˜å¯¶"><div class="post-qr-code__desc">æ”¯ä»˜å¯¶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/java/jvm/j4/"><img class="prev_cover" data-src="http://img.zeze.info/img/java/jvm/20191224182844.png!www.zeze.info" onerror="onerror=null;src='http://zeze.info/images/404.gif'"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">éƒ½åœ¨è¿™é‡Œ!!Java(GC)åƒåœ¾æ”¶é›†å™¨å’Œæ”¶é›†ç®—æ³•</div></div></a></div><div class="next-post pull_right"><a href="/java/jvm/j2/"><img class="next_cover" data-src="http://img.zeze.info/img/java/jvm/1.jpg!www.zeze.info" onerror="onerror=null;src='http://zeze.info/images/404.gif'"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">ç»å¸¸è¢«é—®åˆ°Javaè™šæ‹Ÿæœºè°ƒä¼˜,çœ‹å®Œè¿™ç¯‡ä¸è¶³200å­—çš„æ–‡ç« èƒ½å¸®åˆ°ä½ </div></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> è¯„è®º</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var requestSetting = function (from,set) {
  var from = from
  var setting = set.split(',').filter(function(item){
  return from.indexOf(item) > -1
  });
  setting = setting.length == 0 ? from :setting;
  return setting
}

var guestInfo = requestSetting(['nick','mail','link'],'nick,mail,link')
var requiredFields = requestSetting(['nick','mail','link'],'nick,mail')

window.valine = new Valine({
  el:'#vcomment',
  appId: 'cCz2akesnpulXXrJFSLeK3MX-9Nh9j0Va',
  appKey: 'Mjv9YhO6r936tN8cgIQXDzoP',
  notify: false,
  verify: false,
  placeholder: 'è®°å¾—ç•™ä¸‹ä½ çš„æ˜µç§°å’Œé‚®ç®±...å¯ä»¥å¿«é€Ÿæ”¶åˆ°å›å¤',
  avatar: 'monsterid',
  meta: guestInfo,
  pageSize: '10',
  lang: 'zh-cn',
  recordIP: true,
  serverURLs: '',
  emojiCDN: '',
  emojiMaps: "",
  enableQQ: false,
  requiredFields: requiredFields
});</script></div></article></main><footer id="footer" style="background-image: url(http://img.zeze.info/img/java/jvm/20191224174733.png!www.zeze.info)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2021 By æ³½æ³½853089986@qq.com</div><div class="footer_custom_text">è°¢è°¢è§‚çœ‹æˆ‘çš„<a href="https://www.zeze.info/">åšå®¢</a>,æˆ‘ä¼šæ›´åŠ åŠªåŠ›äº§å‡ºçš„</div><div class="icp"><a><img class="icp-icon" src="/img/icp.png"><span>é„‚ICPå¤‡19026749å·</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="é˜…è¯»æ¨¡å¼"></i><i class="fa fa-plus" id="font_plus" title="æ”¾å¤§å­—ä½“"></i><i class="fa fa-minus" id="font_minus" title="ç¼©å°å­—ä½“"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="ç®€ç¹è½¬æ¢" target="_self">ç¹</a><i class="darkmode far fa-moon" id="darkmode" title="å¤œé—´æ¨¡å¼"></i></div><div id="rightside-config-show"><div id="rightside_config" title="è®¾ç½®"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="ç›®å½•" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="å›åˆ°é¡¶éƒ¨" aria-hidden="true"></i></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">æœ¬åœ°æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>ç”±</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="external nofollow noopener noreferrer" style="color:#49B1F5;">hexo-generator-search</a>
 <span>æä¾›æ”¯æŒ</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script><script src="/js/search/local-search.js"></script></body></html>